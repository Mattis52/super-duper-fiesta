// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`connection emits correct actions when active question is secret 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "id": "1",
      "pin": 3141592653,
      "registrationOpen": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_ISSUE",
    Object {
      "_id": "1",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "secret": true,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ENABLE_VOTING",
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "1",
      "alternative": "3",
      "question": "1",
      "user": "",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "2",
      "alternative": "3",
      "question": "1",
      "user": "",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "3",
      "alternative": "3",
      "question": "1",
      "user": "",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "4",
      "alternative": "3",
      "question": "1",
      "user": "",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
]
`;

exports[`connection emits correct actions when not signed in and no active genfors 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": false,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": false,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_OUT",
    Object {},
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": false,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "code": "no_active_meeting",
      "error": 1,
      "message": "Ingen aktiv generalforsamling.",
    },
  ],
]
`;

exports[`connection emits correct actions when retrieving active genfors fails 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": false,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "issue",
    Object {},
    Object {
      "error": "Noe gikk galt. Vennligst prøv igjen.",
    },
  ],
]
`;

exports[`connection emits correct actions when retrieving active question fails 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "id": "1",
      "pin": 3141592653,
      "registrationOpen": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "issue",
    Object {},
    Object {
      "action": null,
      "error": null,
      "message": "Det er ingen aktive saker for øyeblikket.",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
]
`;

exports[`connection emits correct actions when retrieving questions fails 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "id": "1",
      "pin": 3141592653,
      "registrationOpen": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_ISSUE",
    Object {
      "_id": "1",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ENABLE_VOTING",
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "1",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "2",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "3",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "4",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
]
`;

exports[`connection emits correct actions when retrieving votes fails 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "id": "1",
      "pin": 3141592653,
      "registrationOpen": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_ISSUE",
    Object {
      "_id": "1",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ENABLE_VOTING",
  ],
]
`;

exports[`connection emits correct actions when signed in and active genfors 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "id": "1",
      "pin": 3141592653,
      "registrationOpen": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_ISSUE",
    Object {
      "_id": "1",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ENABLE_VOTING",
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "1",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "2",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "3",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "4",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
]
`;

exports[`connection emits correct actions when signed in and no active genfors 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "code": "no_active_meeting",
      "error": 1,
      "message": "Ingen aktiv generalforsamling.",
    },
  ],
]
`;

exports[`connection emits correct actions when there is no active question 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "id": "1",
      "pin": 3141592653,
      "registrationOpen": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "issue",
    Object {},
    Object {
      "action": null,
      "error": null,
      "message": "Det er ingen aktive saker for øyeblikket.",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
]
`;

exports[`connection emits correct actions when user has already voted 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "id": "1",
      "pin": 3141592653,
      "registrationOpen": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_ISSUE",
    Object {
      "_id": "1",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ENABLE_VOTING",
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "1",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "2",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "3",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "4",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VOTED_STATE",
    Object {
      "voted": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
]
`;

exports[`connection emits correct actions when user has not completed registration and no genfors is active 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": false,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "code": "no_active_meeting",
      "error": 1,
      "message": "Ingen aktiv generalforsamling.",
    },
  ],
]
`;

exports[`connection emits correct actions when validation of password hash returns false 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": false,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "id": "1",
      "pin": 3141592653,
      "registrationOpen": true,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_ISSUE",
    Object {
      "_id": "1",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ENABLE_VOTING",
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "1",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "2",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "3",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "ADD_VOTE",
    Object {
      "_id": "4",
      "alternative": "3",
      "question": "1",
      "user": "1",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "CLOSE_ISSUE",
    Object {
      "_id": "2",
      "active": true,
      "alternatives": Array [
        Object {
          "id": "1",
          "text": "Blank",
        },
        Object {
          "id": "2",
          "text": "Yes",
        },
        Object {
          "id": "3",
          "text": "No",
        },
      ],
      "countingBlankVotes": false,
      "description": "Description goes here",
      "genfors": "1",
      "meeting": "1",
      "secret": false,
      "showOnlyWinner": false,
      "toObject": [Function],
      "voteDemand": "regular",
      "votes": Object {
        "1": 0,
        "2": 0,
        "3": 4,
      },
      "winner": "3",
    },
  ],
]
`;

exports[`connection emits correct actions when validation of password hash returns throws error 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": false,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": false,
          "genfors": "1",
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "OPEN_MEETING",
    Object {
      "code": "no_active_meeting",
      "error": 1,
      "message": "Ingen aktiv generalforsamling.",
    },
  ],
]
`;

exports[`connection when no meeting warns about no active meeting 1`] = `
Array [
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": null,
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "VERSION",
    Object {
      "version": "fake_git_hash",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": null,
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_SIGNED_IN",
    Object {
      "full_name": "Namy",
      "id": "123",
      "logged_in": true,
      "permissions": 5,
      "username": "123",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": null,
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_ERROR",
    Object {
      "error": "Denne brukeren er ikke koblet til en generalforsamling. Vennligst logg ut og inn igjen.",
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": null,
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "AUTH_REGISTERED",
    Object {
      "registered": false,
    },
  ],
  Array [
    Object {
      "request": Object {
        "headers": Object {
          "cookie": Object {
            "passwordHash": "hashy",
          },
        },
        "user": Object {
          "_id": "123",
          "completedRegistration": true,
          "genfors": null,
          "logged_in": true,
          "name": "Namy",
          "onlinewebId": "123",
          "permissions": 5,
        },
      },
    },
    "issue",
    Object {},
    Object {
      "error": "Noe gikk galt. Vennligst prøv igjen.",
    },
  ],
]
`;
